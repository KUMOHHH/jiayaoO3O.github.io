---
title: 小米手机刷机教程
date: 2019-03-19 22:51:30
tags: [备忘,刷机,小米]
categories: 技术
---
小米作为为数不多的还愿意开放bootloader锁的厂家,刷机其实是比较简单的,总的来说可以归纳为以下4步:

1. 为自己的小米账号申请解锁权限.
2. 用该账号解锁自己的手机
3. 刷机(可选卡刷或者线刷).
4. (可选)刷magisk获得root权限.

第一次刷机需要准备的东西比较多,但是只要第一次成功了,以后刷机只需要更换一个刷机包就行了,其他都是现成不变的,而且失败了也没关系,手机没这么容易坏,还是能救回来的,哪怕真的刷坏了也没关系,小米依然保修的.

接下来详细讲解各个步骤.

<!-- more -->

## 申请解锁权限

进入miui网站的[申请解锁页面](http://www.miui.com/unlock/index.html),用自己的账号登录来申请解锁权限,注意:

1. 此时有可能需要0到360个小时的审核时间,有的账号申请马上可以过,有的账号要等15天,这个是小米决定的.
2. 不要借别人的账号给自己的手机解锁,因为现在解锁要求手机和电脑同时登录同一个账号,而让自己的手机登录别人的账号是十分不安全的.
3. 单个账号,一个月内只能解锁同一台设备,即你的A手机一个月内可以反复解锁,但是要等一个月后才能解锁你的B手机.
4. 解锁权限获得之后一直有效,不需要再次申请.

## 解锁你的手机

(警告,**解锁**会**删除你的手机内的所有数据,格式化整个手机**,请做好备份)

申请成功之后,[下载解锁工具](http://miuirom.xiaomi.com/rom/u1106245679/3.3.1212.33/miflash_unlock-3.3.1212.33.zip),开始解锁你的手机,步骤如下:

1. 手机登录该账号.

2. 手机关机,按住**音量下键+开机键**,会进入fastboot界面,如果失败请反复尝试.

   ![](http://www.miui.com/unlock/images/bl_apply_2.png)

3. 电脑端启动解锁工具,用同一个账号登录,开始解锁.![](https://i.loli.net/2019/03/19/5c9106a03faff.png)
4. 解锁完成后,手机会重启,**恢复出厂设置**.
(再次警告,解锁会**删除你的手机内的所有数据,格式化整个手机**,请做好备份)

## 开始刷机

 刷机分为两种模式,一种叫**线刷**,即手机用数据线连接到电脑,用电脑刷机;另一种叫**卡刷**,即把刷机包放在手机里,用手机刷机(当年是用内存卡的,所以叫卡刷).

接下来分别介绍.

### 1.线刷刷机

1. 在[线刷包下载页面](http://www.miui.com/shuaji-393.html)下载属于你手机的系统刷机包,注意线刷包都带有**fastboot**字眼的.

   小米的系统分为开发板和稳定版,开发板基本每周更新,稳定版大约一个月更新一次.

   下载完成之后,解压该刷机包.

2. 手机关机,按住**音量下键+开机键**,进入fastboot界面,手机连接电脑.

3. 下载[小米线刷刷机工具MiFlash](http://bigota.d.miui.com/tools/MiFlash2018-5-28-0.zip),解压,打开该软件.

   ![](https://i.loli.net/2019/03/20/5c911352c2331.png)

   点击蓝色框的**加载设备**,会加载已经连接的手机设备.

   点击红色框的**选择**,选择刚刚解压的线刷包.

   点击黄色框的三个选项中的一个,其中:

   - **全部删除**会删除手机的所有数据,不会有任何残留,不需要再次解锁.
   - **全部删除并且lock**在删除的基础上,会锁定你的手机,即下次刷机还得用账号解锁一次.
   - **保留用户数据**会保留用户的文件和所安装的app,不需要再次解锁.

   建议选择全部删除.

4. 确定无误之后,点击绿色框的**刷机**,即可开始刷机,刷机过程只要进度条没有红色警告就是正常现象,刷机完成后手机会自动重启.

注意,线刷是一个非常底层的操作,所以只要手机能进入fastboot界面,都能通过线刷救回来,线刷也是最彻底,最干净的一种刷机方式,**但是一定要注意备份资料**.

------

### 2.卡刷刷机

卡刷相对于线刷会更快,也更灵活,步骤如下:

1. 在小米[miui官网](http://www.miui.com/download.html)下载你手机的卡刷包(文件名中没有fastboot字眼,以.zip结尾).

2. 在[TWRP官网](https://twrp.me/Devices/Xiaomi/)或者小米论坛,下载你手机的第三方recovery(也叫第三方re)镜像(文件后缀名是.img).

   这里要解释一下什么是第三方recovery.

   recovery的作用是给手机恢复出厂设置,更新系统,备份系统的,但是由于官方recovery功能太少,限制太多,所以我们要刷入第三方的recovery,而[twrp](https://zh.wikipedia.org/wiki/TWRP)就是一个开源的,成熟的第三方re.

   注意:如果你是在小米论坛下载的第三方re,那他们一般会顺便提供一个叫"**电脑端一键刷入recovery.bat**"的文件,此时你只要手机进入fastboot界面,连接电脑,双击该文件,然后按照指示下一步就行了,不需要下面345步.

3. 点击下载[fastboot工具](https://dl.google.com/android/repository/platform-tools-latest-Windows.zip),解压到某个文件夹中,将刚刚下载的img文件也放到该文件夹.

4. 电脑按住shift键,鼠标在该文件夹右键,打开powershell.

5. 输入以下命令:

   ```powershell
   .\fastboot.exe flash recovery twrp-3.2.3-0-gemini.img (最后一个文件填你刚刚下载的文件的名称)
   ```

   ```powershell
   .\fastboot.exe boot twrp-3.2.3-0-gemini.img (最后一个文件填你刚刚下载的文件的名称)
   ```

   手机就已经成功刷入第三方re,并且会重新启动进入第三方re界面.

   刷入了第三方re之后,关机状态下按住**音量上键+电源键**即可再次进入,以后卡刷就都在第三方re里面刷了,不需要电脑.

6. 这时你的手机进入了第三方re界面,应该是长这样的:

   ![](https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/TWRP_2.7.0.0.png/360px-TWRP_2.7.0.0.png)

   点击Settings进入设置,点击最右边的一项设置语言,找到中文(Chinese),点击设置,即可设置成中文.

7. 再返回到主页,点击**清除**,滑动按钮恢复出厂设置

   注意,这里的恢复出厂设置,和在fastboot里线刷删除所有数据不一样,**这里的恢复出厂设置,不会删除你手机上存储文件**.

8. 再返回到主页,将手机连接到电脑,将刚刚下载的刷机包复制到手机上(如果你是用手机下载的刷机包,那就不需要复制了).

   点击**安装**,选择刚刚的刷机包,开始刷机.

   刷机完成之后点击重启,即可刷机成功.

   ------

   ## (可选)刷入magisk获得root权限

   经过刚刚的步骤,刷机就已经完成了,如果想要进一步体验强大的[magisk](https://sspai.com/post/53043),可以继续以下步骤,非常简单.

   1. 进入[magisk下载页面](https://github.com/topjohnwu/Magisk/releases),分别下载下载最新的magisk和magisk manager.

      这里要解释一下,magisk分成两部分,一部分是magisk本身,另一部分是magisk manager这个管理magisk的app,刷入了magisk之后,手机再安装这个app就可以正常安装模块了.

   2. 关机状态下,音量上键+开机键,进入第三方re,不需要清除数据,**直接点击安装**,选择刚刚下载的magisk文件.

   3. 重启之后,安装magisk manager这个app,就可以正常使用,并且手机现在已经有了root权限了.![](https://i.loli.net/2019/03/20/5c91e7e69e316.png)

      ------

      ## 总结

      以上就是刷机的全部步骤了,总的来说,只要按照步骤来基本都不会失败,而且哪怕是失败了,手机也不会轻易坏掉的,只要能进入fastboot界面,总是能救回来的,但是要注意,**一定一定要记得备份自己的资料,资料没了就真的没了**.![](https://i.loli.net/2019/03/21/5c93791231408.jpg)
