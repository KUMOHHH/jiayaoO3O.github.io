---
title: 广东海洋大学三种路由器上网方式
date: 2019-01-29 00:02:56
tags: [路由器上网,mac欺骗,广东海洋大学]
categories: 技术
---

**2019.2.30更新:从2019年学期开始,电信在服务端进行了调整,每次登录的存活期只有9个小时,也就是说,不管你用任何方法上网,9个小时之后都必须打开天翼app重新登录一次,以前的方法是登录一次用一天,现在是登录一次用9个小时,其他不变**.

------

## 海大电信限制学生使用路由器的原因

为了赚钱,其他任何理由都是扯淡. 所以电信选择限制学生使用路由器,每个账号只能登录一台手机和一台电脑,迫使大家每个人都开通一个账号.

## 海大电信限制学生使用路由器的原理
海大电信是通过验证学生登录设备的ip地址来确保单账号单设备登录的,一台手机或电脑在海大想要上网,会经过以下几个步骤:

<!-- more -->

 1. 手机或电脑连接到已经**关闭了DHCP**的路由器
 2. 这台手机根据自己的**mac地址**,获得从海大电信分配的以**10.8开头的ip地址**
 3. 手机打开天翼校园app,准备登录账号
 4. 天翼校园app**检查手机的ip地址是否是以10.8开头**的**经由海大电信分配的合法ip地址**
 5. 点击登录,登录成功
 6. 手机可以持续上网,期间电信的服务器会持续检测该设备是否有数据传输,如果长时间没有数据传输,则判断为设备掉线,需要重新登录.

可以看到,电信想要获取学生设备的ip地址分配权,第一步就是**要求学生将自己的路由器关闭DHCP**,只有关闭了路由器的DHCP,电信才能从上一级直接分配ip给每一台学生设备.

----------


## 方法1:电信官方允许的使用路由器上网方式
### 优点

 1. 基本不需要任何额外的操作,按照官方的指导,只需要一台路由器即可

### 缺点

 1. 只能进行**单账号单客户**端登录,**即一个账号只能允许登录一台手机,一台电脑**,所以基本全宿舍每人都需要一个账号
 2. 电脑需要安装**极其恶心**的天翼校园软件,并且要让该软件一直运行
 3. 如果掉线了需要再次重复登录
 4. 电脑客户端毛病极多,经常随机抽风

### 步骤

 1. 手机或电脑连接已经通电的路由器,输入路由器管理界面的地址进入路由器管理界面(一般是192.168.1.1,不同的路由器一般地址不一样,可以查看路由器底部,一般会有)
 2. 关闭路由器的DHCP功能
 3. 将外网线(即学校提供的,连接到外部上网的网线)插入路由器的[LAN口][1]
 4. 手机连上该路由器,打开天翼校园app,即可登录上网

----------
## 方法2:单路由器的mac克隆上网方式
### 优点

 1. 只需要一台路由器即可
 2. 每天只需一次登录(因为海大每晚断网),即可全天**单账号,多设备**登录,意味着全宿舍公用一个账号成为可能
 3. 因为路由器自身总是会有极小量数据与服务器传输,所以可以做到全天不掉线
 4. 该方法由于只需要手机登录账号,所以电脑并不需要安装天翼校园软件

### 缺点

 1. 由于只有一个路由器,所以操作步骤略微繁琐,需要一定动手能力

### 原理

该方法是通过将路由器的mac地址克隆成登录手机的mac地址,从而欺骗电信服务器,让服务器将路由器误以为是手机设备,所以可以上网

### 步骤


 1. 手机打开wifi高级设置,找到手机的**mac地址**
 2. 电脑连接路由器,进入路由器管理界面,找到**mac地址克隆设置**,输入刚刚手机的mac地址,保存
 2. 关闭路由器的DHCP(此时请务必不要刷新网页,保持页面不要动,因为关闭了DHCP之后,电脑没有了ip地址,是无法直接连接到路由器管理界面的,但是没有关闭的旧路由器管理界面仍能进行操作,所以不能刷新页面,刷新了直接就进不去了)
 2. 外网线接入LAN口
 3. 手机连接路由器,打开天翼校园app进行登录
 4. 登录成功之后,电脑在网页端打开DHCP
 5. 将外网线从LAN口拔出,插入WAN口(此时已经登陆成功,并且由于手机和路由器mac地址相同,所以服务器会误以为路由器是手机)
 6. **手机清除天翼校园app后台**,关闭手机wifi再重新打开WiFi

此时整个过程都已经完成,路由器已经能够正常上网了

### 注意

可以看到,以上的步骤,除了输入mac地址那一步,**其他的每一天都要操作一次**,过程要用到电脑,还要拔网线,所以说稍微有点繁琐,并且如果你使用的是[水星mercury路由器][2],步骤会更加麻烦,因为水星的辣鸡低端路由器自身固件原因,关闭了DHCP再打开之后,是不能够自动获取IP地址的,所以步骤会变成
 1. 关闭路由器DHCP
 2. 外网线接入LAN口
 3. 手机连接路由器,打开天翼校园app进行登录
 4. 登录成功之后,电脑在网页端打开DHCP
 5. 查看手机的WiFi高级设置,看看手机现在的**ip地址,子网掩码,网关(路由器)**是什么
 6. 在路由器管理界面选择**手动输入ip地址**(有的路由器也叫静态ip),填入上方的三个数据
 7. 将外网线从LAN口拔出,插入WAN口
 8. 手机清除天翼校园app后台,关闭手机wifi再重新打开WiFi

 可以看到,使用水星路由器会使得整个过程变得更加繁琐,所以建议不要使用水星路由器

----------

## 方法3:双路由器的mac克隆上网方式
### 优点

 1. 操作步骤大大减少,简单快捷
 2. 参考单路由器方法

### 缺点

 1. 需要两个路由器,这是最大的缺点了,如果你没有两个路由器,可能需要额外购买一个

### 原理
双路由器的本质原理和单路由器是一样的,但是单路由器上网方法之所以会繁琐,是因为在这些步骤中,有"关闭DHCP,打开DHCP"这一个操作,而只要使用两个路由器,就可以让一个路由器打开DHCP,另一个路由器DHCP关闭,这样就能减少很多个步骤了.

### 步骤
我们将两个路由器分别叫做**1号路由器,2号路由器**

 1. **1号路由器**关闭DHCP
 2. **2号路由器**找到mac克隆选项,输入手机的mac地址,保存
 3. 将外网线插入**1号路由器**的LAN口
 4. 找来一根短短的网线,将**1号路由器的LAN口**和**2号路由器的WAN口**连接,此时的路由器接线应该是下面那样的
 ![路由器接线方式][3]
 5. 手机连上**1号路由器**的WiFi,登录天翼校园app
 6. 手机清除天翼校园app后台,并且连上**2号路由器**,此时**2号路由器**已经能够正常上网了.

### 注意
上面的步骤只是第一次设置的时候需要做的,以后每天上网只需要3步

 1. 手机连接1号路由器
 2. 登录app
 3. 清除app后台,连接2号路由器正常上网

上面的操作对路由器的品牌没有限制,**但是水星路由器由于无法自动获取ip地址,所以不建议水星路由器充当2号路由器**,而且如果两个路由器中一个性能很强,一个很垃圾,建议用垃圾路由器充当1号路由器,用性能强的作为2号路由器.

## mac克隆能成功的原理
可以观看下方的视频解释为什么可以用mac克隆方法对电信服务器进行欺骗
<iframe src="//player.bilibili.com/player.html?aid=21369496&cid=35146763&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="480"> </iframe>


[1]: https://www.192ly.com/qiu-zhu/wan-lan-qb.html
[2]: http://www.mercurycom.com.cn/
[3]: https://i.loli.net/2019/01/29/5c500a6ab700a.png